# Руководство по сферам и зонам

## Основные возможности
- Сферы сервиса отображаются на главной карте в виде полупрозрачных зон.
- Список сфер доступен в левом сайдбаре: можно включать/выключать отображение, фокусироваться на отдельной сфере и выбирать режим раскладки.
- Доступные раскладки: сохранённая (использует координаты из БД), радиальная (равномерно распределяет сферы по окружности) и сеточная.
- Положение зон можно сохранить — координаты и радиус записываются в поля `center_x`, `center_y`, `radius` модели `Sphere`.

## Как работать со сферами
1. Авторизуйтесь и укажите токен + ID организации в сайдбаре.
2. Нажмите «Загрузить данные» — сервис подгрузит участников, группы и сферы.
3. Используйте блок «Сферы»:
   - чекбоксы отвечают за отображение отдельных сфер;
   - кнопка «Фокус» подсвечивает выбранную сферу и приглушает остальные;
   - переключатель «Режим отображения» задаёт способ расположения зон.
4. После подбора подходящего расположения нажмите «Сохранить расположение». Координаты будут отправлены на `/api/spheres/layout`.
5. Повторно загрузив страницу, выберите режим «Сохранённый», чтобы увидеть сохранённые позиции.

## Координаты и радиус
- `center_x`, `center_y` — относительные координаты (0..1) от ширины/высоты области карты.
- `radius` — относительное значение, используемое для вычисления диаметра от минимальной стороны области.
- Если значения не заданы, отображение использует автоматическую раскладку.

## API
- `GET /api/spheres?organization_id=...` — получить список сфер с текущими координатами.
- `POST /api/spheres` — создать новую сферу (можно сразу передать `center_x`, `center_y`, `radius`).
- `PATCH /api/spheres/{id}` — обновить данные сферы.
- `POST /api/spheres/layout` — массовое обновление расположения сфер. Тело запроса: `{"organization_id": 1, "layout": [{"sphere_id": 10, "center_x": 0.4, "center_y": 0.6, "radius": 0.2}]}`.

## Советы
- Для радиальной раскладки оптимально 3–6 сфер: зоны не перекрываются и легко читаются.
- Для большого количества сфер используйте сетку и настраивайте видимость отдельных зон.
- Цвета сфер задаются в поле `color` (`#rrggbb` или CSS-переменные) и применяются как фон зоны.
